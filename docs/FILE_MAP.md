# File map (what each file does)

This repo is a **Vite + TypeScript + Three.js** site that renders a 3D model (“DarkStar”) on the landing section, with **parallax background** and a **flip-words** text animation.

## Root

- **`index.html`**: Main HTML document. Defines the top nav, the landing section (parallax layers + `#darkstar-container` canvas host), the About section, and loads the app entry via `<script type="module" src="/src/main.ts">`.
- **`package.json`**: Project metadata and scripts (`vite` dev/build/preview, `gh-pages` deploy). Declares dependencies (`three`, `three-stdlib`) and dev deps (`typescript`, `vite`, `@types/three`).
- **`package-lock.json`**: NPM lockfile (exact dependency versions).
- **`vite.config.js`**: Vite config; sets `base: '/Website3d/'` for correct asset paths on GitHub Pages.
- **`tsconfig.json`**: TypeScript compiler settings (strict mode, bundler module resolution, noEmit, etc.).
- **`readme.txt`**: A short notes file describing the intended `src/` structure (not guaranteed to be fully up to date).
- **`dist/`**: Build output (generated by `npm run build`). This is what gets deployed via `npm run deploy` (`gh-pages -d dist`).
- **`node_modules/`**: Installed dependencies (generated; not source code).

## `src/` (application source)

### Entry + global styles

- **`src/main.ts`**: App entry point and top-level orchestration:
  - Sets CSS var `--site-bg` using `import.meta.env.BASE_URL` so the background image works under a GitHub Pages base path.
  - Creates the Three.js `scene`, camera, renderer, lights.
  - Loads the “DarkStar” model via `loadSuperHornet(...)` (chooses small model on mobile).
  - Initializes landing effects: `initLandingParallax(...)` and `initFlipWords(...)`.
  - Runs a requestAnimationFrame loop to update model rotation/lean and render the scene.
  - Exposes `window.__disposeWebsite3d` as an optional cleanup hook for future refactors/HMR.
- **`src/style.css`**: Global styles for layout and visuals:
  - Fixed top nav.
  - Landing section layout (parallax background layers + canvas overlay).
  - Hero typography and flip-word animation CSS.
  - About section styling.
  - Uses `--site-bg` for the page background image (set from `src/main.ts`).

### `src/app/` (Three.js “engine” helpers)

- **`src/app/Camera.ts`**: Creates a `THREE.PerspectiveCamera` sized to a specific container element. Uses a `ResizeObserver` to keep aspect/projection updated.
- **`src/app/Renderer.ts`**: Creates a `THREE.WebGLRenderer` sized to a container element. Uses a `ResizeObserver` to resize the renderer when the host container changes size.
- **`src/app/Lights.ts`**: Creates the lighting setup (currently one `DirectionalLight`).
- **`src/app/Controls.ts`**: Input-driven model motion:
  - Tracks mouse (desktop) or touch (mobile) to compute target rotations.
  - Applies smoothing + clamps rotation ranges each frame.
  - On desktop also applies a “lean” effect by shifting model position.
  - Returns an `updateRotation()` function that the render loop calls each frame.
- **`src/app/SceneManager.ts`**: Currently empty (placeholder for future scene/loop management).

### `src/landing/` (landing page effects)

- **`src/landing/parallax.ts`**: Implements landing background parallax:
  - Sets background images on `[data-parallax-layer]` elements using provided asset URLs.
  - Computes scroll progress (0..1) relative to the landing section.
  - Uses a spring integrator (stiffness/damping/mass) to smooth scroll progress (Framer Motion–like feel).
  - Drives per-layer transforms (mountains/planets) on each animation frame.
  - Returns a disposer to stop RAF and remove listeners.
- **`src/landing/flipWords.ts`**: Implements rotating “flip words” headline text:
  - Reads words from `data-flip-words="A,B,C"` and duration from `data-flip-duration`.
  - Builds DOM spans for letters with staggered animation delays.
  - Animates exit/enter by toggling CSS classes and timing removal after the exit duration.
  - Returns a disposer to clear timers.

### `src/models/` (3D models)

- **`src/models/SuperHornet.ts`**: Loads the DarkStar GLB model (despite the name):
  - Uses `GLTFLoader` from `three-stdlib`.
  - Loads either `assets/DarkStar.glb` or `assets/DarkStarSmall.glb` depending on mobile.
  - Adds the model to the scene, scales it, and wires `addMouseRotation(...)` from `Controls.ts`.
  - Returns `{ model, update }` (or `null` on error).
- **`src/models/loadModel.ts`**: Currently empty (placeholder for a generic model loader).

### `src/utils/`

- **`src/utils/mobileCheck.ts`**: `isMobile()` helper (simple user-agent regex).

### Type support / assets

- **`src/vite-env.d.ts`**: Vite TypeScript environment types reference.
- **`src/typescript.svg`**: Static asset (TypeScript logo) from the template.

## `public/` (static assets served as-is)

- **`public/assets/*.glb`**: 3D models used by the Three.js scene:
  - `DarkStar.glb`: main model.
  - `DarkStarSmall.glb`: smaller variant for mobile.
- **`public/assets/*.png|*.jpg|*.PNG`**: Landing/background images:
  - `intro_bg.PNG`: page background (set via `--site-bg`).
  - `sky.jpg`, `mountain-*.png`, `planets.png`: parallax layers.
- **`public/models/astronaut.glb`**: Additional model asset (currently not referenced by the TypeScript code shown here).
- **`public/vite.svg`**: Vite logo asset (template).


